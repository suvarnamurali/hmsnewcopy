{% extends 'common/common_master.html' %}
{% load static %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/pt_register.css' %}"> 
<link rel="stylesheet" href="{% static 'css/patient_style.css' %}">
{% endblock %}

{% block content %}

<body>
    <div class="form-body">
        <div class="row">
            <h1 style="text-align: center; color:rgb(2, 8, 55); padding-top: 20px;">Patient Registration Form</h1>
            <div class="form-holder">
                <div class="form-content">
                    <div class="form-items">
                        {{ success_msg }}
                         {{error_msg }}
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="col-md-12 mb-2 mt-3">
                                <label for="p_name">Name</label>
                                <input class="form-control" type="text" name="pat_name" id="p_name" required>
                                <span id="checkname" style="font-size: small;"></span>
                            </div>

                            <div class="col-md-12 mb-2 mt-3">
                                <label for="p_name">Email</label>
                                <input class="form-control" type="text" name="pat_email" id="p_email" required>
                                <span id="checkmail" style="font-size: small;"></span>
                            </div>
                            
                            <div class="col-md-12 form-group">
                                <label for="p_address">Address</label>
                                <textarea class="form-control mt-3" id="pat_address" name="pat_address" rows="7">
                                </textarea>
                            </div>

                            <div class="col-md-12 input-group">
                                <!-- declaration for first field -->
                                <div class="col-md-5 mb-2">
                                    <label class="mb-3" for="p_age">Age</label>
                                    <input type="number" class="form-control" name="pat_age" id="p_age" required>
                                </div>

                                <!-- reducong the gap between them to zero -->
                                <div class="col-md-2">
                                    <span class="input-group-btn"></span>
                                </div>

                                <!-- declaration for second field -->
                                <div class="col-md-5">
                                    <label for="p_bg">Blood Group</label>
                                    <select class="form-select mt-3" name="blood_grp" id="p_bg" required>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-12 input-group">
                                <!-- declaration for first field -->
                                <div class="col-md-5 mb-2">
                                    <label class="mb-2" for="p_no">Contact No</label>
                                    <input class="form-control" type="number" name="pat_phno" id="p_no" required>
                                    <span id="checkno" style="font-size: small;"></span>
                                </div>

                                <!-- reducong the gap between them to zero -->
                                <div class="col-md-2">
                                    <span class="input-group-btn"></span>
                                </div>

                                <!-- declaration for second field -->
                                <div class="col-md-5">
                                    <label class="mb-2" for="p_dob">Date of Birth</label>
                                <input class="form-control" type="date" name="pat_dob" id="p_dob" required>
                                </div>
                            </div>
                           
                            <div class="col-md-6 mt-3" style="width:50%;">
                                <label class="mb-3 mr-1" for="gender">Gender : </label>

                                <input type="radio" value="male" class="btn-check" name="gender" id="male" autocomplete="off"
                                    required>
                                <label class="btn btn-sm btn-outline-secondary" for="male">Male</label>

                                <input type="radio" class="btn-check" value="female" name="gender" id="female" autocomplete="off"
                                    required>
                                <label class="btn btn-sm btn-outline-secondary" for="female">Female</label>

                            </div>

                            

                            <div class="col-md-12  mt-3" style="width:100%;">
                                <label class="mb-3 mr-1" for="gender">Pic (optional) </label>

                                <input type="file" name="pic" class="form-control mb-3" />
                                 
                            </div>

                            <div class="form-button mt-2" style="text-align: center;">
                                <button class="btn btn-primary btn-block btn-lg">Register
                                     
                                </button>
                            </div>

                    </div>

                    </form>
                    <script>

                        var pname = document.getElementById('p_name')
                        var pemail = document.getElementById('p_email')
                        var number = document.getElementById('p_no')

                    pname.onkeyup = function(){
                        var alphabets = /[a-z A-Z]/g;
                        if(pname.value.match(alphabets)){
                            document.getElementById('checkname').innerHTML='available'
                            document.getElementById('checkname').style.color = 'green'
                        }
                        else{
                            document.getElementById('checkname').innerHTML='please enter your name'
                            document.getElementById('checkname').style.color = 'red'
                        }
                    }
                    pemail.onkeyup = function(){

                        var email = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/g;
                        if(pemail.value.match(email)){

                            document.getElementById('checkmail').innerHTML='your email is valid'
                            document.getElementById('checkmail').style.color = 'green'
                        }
                        else{

                            document.getElementById('checkmail').innerHTML='please enter a valid email'
                            document.getElementById('checkmail').style.color = 'red'
                        }

                    }
                    number.onkeyup = function(){
                        var contact = /^\d{10}/g;
                        if(number.value.match(contact)){
                            document.getElementById('checkno').innerHTML='available'
                            document.getElementById('checkno').style.color = 'green'
                        }
                        else{
                            document.getElementById('checkno').innerHTML='please enter number'
                            document.getElementById('checkno').style.color = 'red'
                        }
                    }


                    </script>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>

{% endblock %}